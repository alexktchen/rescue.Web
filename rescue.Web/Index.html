<!DOCTYPE html>
<html ng-app="app">
<head>
    <title>守護台灣-求救自救平台</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="守護台灣比賽::KKAwesome::守護台灣-求救自救平台">
    <meta name="author" content="KKAwesome">
    <link rel="shortcut icon" href="favicon.ico">
    <link href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap.min.css" rel="stylesheet" />
    <link rel="stylesheet" href="assets/css/style.css">
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="assets/css/custom.css">
    <link href="contents/custom.css" rel="stylesheet" />
</head>

<body ng-controller="RescueCtrl">

    <div class="wrapper">
        <div class="header">
            <div class="topbar">
                <div class="container">
                    <ul class="loginbar pull-right">
                        <li><i class="fa fa-info-circle"></i> <a href="#aboutus">關於我們團隊</a></li>
                        <li><i class="fa fa-trophy"></i> <a href="https://ossonazure.bhuntr.com/finalist.php" target="_blank">入圍公告</a></li>
                        <li><i class="fa fa-github"></i> <a href="https://github.com/kyleap" target="_blank">Github</a></li>
                    </ul>
                </div>
            </div>
            <div class="navbar navbar-default mega-menu" role="navigation">
                <div class="container">
                    <!-- Brand and toggle get grouped for better mobile display -->
                    <div class="navbar-header">
                        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-responsive-collapse">
                            <span class="sr-only">Toggle navigation</span>
                            <span class="fa fa-bars"></span>
                        </button>
                        <a class="navbar-brand" href="index.html">
                            <h1><i class="fa fa-ambulance fa-5"></i>  自救求救平台</h1>
                        </a>
                    </div>
                    <div class="collapse navbar-collapse navbar-responsive-collapse">

                    </div>
                </div>
            </div>
        </div>
        <div class="purchase">
            <div class="container">
                <div class="row">
                    <div class="col-md-9 animated fadeInLeft">
                        <span>快速查詢鄰近地址</span>
                        <input type="text" class="form-control" id="txtAddr">
                    </div>
                    <div class="col-md-3 btn-buy animated fadeInRight">
                        <a href="#" class="btn-u btn-u-dark-blue btn-u-lg" id="btnSearch"><i class="fa fa-search"></i> 查詢</a>
                    </div>
                </div>
            </div>
        </div>


        <!--=== Map ===-->
        <div class="row">
            <div class="col-md-1"></div>
            <div class="col-md-10">
                <div id="map"></div>
            </div>
            <div class="col-md-1"></div>
        </div>
        <!--=== End Map ===-->

        <div class="container content">
            <div class="clearfix margin-bottom-30"></div>


            <div class="clearfix margin-bottom-40"></div>

            <!-- 目前資訊 -->
            <div class="margin-bottom-20"></div>
            <div class="row margin-bottom-40">
                <div class="col-md-4 col-sm-6">
                    <div class="service-block service-block-default">
                        <i class="fa fa-ambulance fa-lg"></i>
                        <h2 class="heading-md">等待救援總計</h2>
                        <p id="rescuetotal">0</p>
                    </div>
                </div>
                <div class="col-md-4 col-sm-6">
                    <div class="service-block service-block-default">
                        <i class="fa fa-info-circle fa-lg"></i>
                        <h2 class="heading-md">求救資訊總計</h2>
                        <p id="helptotal">0</p>
                    </div>
                </div>
                <div class="col-md-4 col-sm-6">
                    <div class="service-block service-block-default">
                        <i class="fa fa-bar-chart fa-lg"></i>
                        <h2 class="heading-md">已完成救援總計</h2>
                        <p id="finished">0</p>
                    </div>
                </div>
            </div>
            <!-- 目前資訊 -->
            <!-- 作品介紹 -->
            <div class="row margin-bottom-40">
                <div class="col-md-12 md-margin-bottom-40">
                    <div class="headline"><h2><i class="fa fa-medkit fa-5"></i> 作品發想：重大危機</h2></div>
                    <div class="row">
                        <div class="col-sm-4">
                            <a href="http://cw1.tw/CW/images/article/C1406860065783.jpg" title="圖片來源" target="_blank"><img class="img-responsive margin-bottom-20" src="Images/1.jpg" alt=""></a>
                        </div>
                        <div class="col-sm-8">
                            <p>2014一場高雄氣爆，讓高雄人付出了30人死亡，數百人受傷的慘痛代價，在重建的過程，身為軟體人的我們開始思考著用「資訊能力」是否能改變一些事情，因此我們希望開發一個能「自救」及「求救」的軟體，當面臨危險時，能很快地透過App發出求救訊號，並相關單位與一般民眾能透過平台，了解哪邊需要支援。</p>
                        </div>
                    </div>
                </div>
            </div>

            <div class="row margin-bottom-40">
                <div class="col-md-12 md-margin-bottom-40">
                    <div class="headline"><h2><i class="fa fa-group fa-5"></i> 救災平台：民眾力量</h2></div>
                    <div class="row">
                        <div class="col-sm-8">
                            <p>網路效應傳播之快，災難發生時，透過網路傳播的力量能將傷害降至最低，資訊公開的平台可讓一般民眾加入，去查詢該區域有哪些地方需要支援，對於災難處理單位，即時的能知道民眾所發出的求救訊號，能讓救援的資源的分配更加有效率。</p>
                        </div>
                        <div class="col-sm-4">
                            <a href="http://fc01.deviantart.net/fs32/f/2008/227/6/6/Fight_The_Power_by_Winfield87.jpg" title="圖片來源" target="_blank"><img class="img-responsive margin-bottom-20" src="Images/2.jpg" alt=""></a>
                        </div>
                    </div>
                </div>
            </div>

            <div class="row margin-bottom-40">
                <div class="col-md-12 md-margin-bottom-40">
                    <div class="headline"><h2><i class="fa fa-mobile fa-5"></i> 求救迅速：一鍵求救</h2></div>
                    <div class="row">
                        <div class="col-sm-8">
                            <p>遇到災難時，使用者能快速的啟動App，並按下求救鍵，在有網路的情況下；如網路在離線的情況下利用 Wi-Fi Direct 持續在各行動裝置間傳遞訊息，以找到有對外網路之行動裝置為目的，並將資訊正確的傳送至雲端伺服器，透過後端程式分析，讓救災人員或現場救護人員順利追蹤和找出受災民眾。</p>
                        </div>
                        <div class="col-sm-4">
                            <a href="http://gogichicago.com/wp-content/uploads/2014/09/Phone.png" title="圖片來源" target="_blank"><img class="img-responsive margin-bottom-20" src="Images/3.png" alt=""></a>

                        </div>
                    </div>
                </div>
            </div>

            <div class="row margin-bottom-40">
                <div class="col-md-12 md-margin-bottom-40">
                    <div class="headline"><h2><i class="fa fa-database fa-5"></i> 自救自助：內建自救資料</h2></div>
                    <div class="row">
                        <div class="col-sm-4">
                            <a href="http://cloudacademy.com/blog/wp-content/uploads/2014/10/azure.jpg" title="圖片來源" target="_blank"><img class="img-responsive margin-bottom-20" src="Images/4.jpg" alt=""></a>
                        </div>
                        <div class="col-sm-8">
                            <p>手機內建自救資料，會根據所在地回傳相關自救資訊，如鄰近醫院、鄰近安檢所連絡電話…等等，透過政府公開之Open data資料，能在危機發生時，獲得最準確的資訊，解決當前需透過網路搜尋之問題。</p>
                        </div>
                    </div>
                </div>
            </div>
            <!-- 作品介紹 -->
            <!-- Demo影片 -->
            <div class="container" id="aboutus">
                <div class="title-v1">
                    <h2>作品Demo</h2>
                </div>
                <iframe title="作品Demo" style="width:100%;height:600px;"
                        src="http://www.youtube.com/embed/1ZMmG_T6JgA?hd=1" frameborder="0" allowfullscreen></iframe>
            </div>
            <!-- Demo影片 -->
            <!-- 關於我們 -->
            <div class="container" id="aboutus">
                <div class="title-v1">
                    <h2>KKAwesome</h2>
                    <p>
                        我們是一群由網路發起的程式愛好者，組成成員有Ken、Kyle、Alex，分別在不同產業服務，擔任程式開發人員，我們有一個共識：如何利用自己的資訊能力，來改善這個社會，我們擁有不同產業的Know-How，希望藉由這次比賽，將我們的想法換作行動，為這個社會盡一份心力，讓台灣越來越好。
                    </p>
                </div>

                <ul class="list-unstyled row">
                    <li class="col-sm-4 col-xs-12">
                        <div class="team-img">
                            <img class="rounded-x img-responsive" src="Images/Ken.jpg" alt="">
                        </div>
                        <h3>Ken</h3>
                        <h4>/ 後端工程師</h4>
                    </li>
                    <li class="col-sm-4 col-xs-12">
                        <div class="team-img">
                            <img class="rounded-x img-responsive" src="Images/Kyle.jpg" alt="">
                        </div>
                        <h3>Kyle</h3>
                        <h4>/ 前端工程師</h4>
                    </li>
                    <li class="col-sm-4 col-xs-12">
                        <div class="team-img">
                            <img class="rounded-x img-responsive" src="Images/Alex.jpg" alt="">
                        </div>
                        <h3>Alex</h3>
                        <h4>/ APP工程師</h4>
                    </li>
                </ul>
            </div>
            <!-- 關於我們 -->

        </div>

        <!--底部區塊 -->
        <div class="footer-v1">
            <div class="copyright">
                <div class="container">
                    <div class="row">
                        <div class="col-md-12" style="text-align:center;">
                            <p>
                                2015 © All Rights Reserved @守護台灣比賽.
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!--底部區塊 -->

    </div>


    <!-- JS Global Compulsory -->
    <script type="text/javascript" src="https://code.jquery.com/jquery-1.11.2.min.js"></script>
    <script type="text/javascript" src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.2/js/bootstrap.min.js"></script>
    <!-- JS Google Map -->
    <script src="//maps.google.com/maps/api/js?sensor=false"></script>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
    <script src="//app.essoduke.org/tinyMap/jquery.tinyMap-3.1.5.min.js"></script>

    <script>
        var map = $('#map');
        markers = [];

        var rescueurl = "http://rescueapiservice.azurewebsites.net/api/rescueInfo";
        var helpurl = "http://rescueapiservice.azurewebsites.net/api/helpInfo";

        //markers.push({ addr: ['25.037467', '121.564077'], text: '台北市政府', icon: { url: '/Images/marker.png' } });
        //markers.push({ addr: ['25.100295', '121.549494'], text: '國立故宮博物院', icon: { url: '/Images/marker.png' } });
        //markers.push({ addr: ['25.055619', '121.5497195'], text: '台北長庚紀念醫院', icon: { url: '/Images/info.png' } });
        //markers.push({ addr: ['25.0547037', '121.5574482'], text: '松山國軍醫院', icon: { url: '/Images/info.png' } });

        function isoDateReviver(value) {
            if (typeof value === 'string') {
                var a = /^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2}(?:\.\d*)?)(?:([\+-])(\d{2})\:(\d{2}))?Z?$/.exec(value);
                if (a) {
                    var utcMilliseconds = Date.UTC(+a[1], +a[2] - 1, +a[3], +a[4], +a[5], +a[6]);
                    return new Date(utcMilliseconds);
                }
            }
            return value;
        }

        var getrescues = function () {
            $.ajax({
                type: 'GET',
                url: rescueurl,
                async: false,
                contentType: "application/json",
                dataType: 'jsonp',
                success: function (response) {
                    $.each(response, function (index, item) {
                        markers.push(
                            {
                                addr: [item.xAddr, item.yAddr],
                                text: "求救時間:" + isoDateReviver(item.rescueTime).toLocaleString() +
                                    "<br />圖片連結:" + item.photoUrl +
                                    "<br />影片連結:" + item.videoUrl +
                                    "<br />錄音連結:" + item.audioUrl
                                ,
                                icon: { url: '/Images/marker.png' }
                            });
                    });
                    $('#rescuetotal').html(response.length);
                    map.tinyMap('modify', {
                        zoom: 16,
                        marker: markers
                    });
                }
            });
        };

        var gethelper = function () {
            $.ajax({
                type: 'GET',
                url: helpurl,
                async: false,
                contentType: "application/json",
                dataType: 'jsonp',
                success: function (response) {
                    $.each(response, function (index, item) {
                        markers.push({
                            addr: [item.xAddr, item.yAddr],
                            text: "單位:" + item.name +
                                "<br />圖片連結:" + item.photoUrl +
                                "<br />電話:" + item.tel +
                                "<br />網站:" + "<a href='" + item.website + "'>" + item.website + "</a>"
                            ,
                            icon: { url: '/Images/info.png' }
                        });
                    });
                    $('#helptotal').html(response.length);
                    map.tinyMap('modify', {
                        zoom: 16,
                        marker: markers
                    });
                }
            });
        };

        $('#finished').html(Math.floor((Math.random() * 100) + 1));

        setTimeout(getrescues, 3000);
        setTimeout(gethelper, 3000);

        map.tinyMap({
            autoLocation: true,
            zoom: 16,
            marker: markers
        });

        $('#btnSearch').click(function () {
            $('#map').tinyMap('panto', $('#txtAddr').val());
        });

    </script>
</body>
</html> 